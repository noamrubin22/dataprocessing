<!DOCTYPE html>
<html>
<style>
.axis path,
.axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
}
.axis text {
    font-family: sans-serif;
    font-size: 11px;
}
</style>
<body>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
var dataset= 
{
  data: [
      {"year": 1995, "zonder": 2472739},
      {"year": 2000, "zonder": 2466666},
      {"year": 2005, "zonder": 2531292},
      {"year": 2010, "zonder": 2535114},
      {"year": 2011, "zonder": 2547727},
      {"year": 2012, "zonder": 2558902},
      {"year": 2013, "zonder": 2564326},
      {"year": 2014, "zonder": 2569868},
      {"year": 2015, "zonder": 2572783},
    ]
 };
     
// create array with datavalues
zonder = [];
for (i = 0; i < dataset.data.length; i++) {
    zonder.push(dataset.data[i].zonder);
}

// create array with years
years = [];
for (i = 0; i < dataset.data.length; i++) {
    years.push(dataset.data[i].years);
}

// write text
d3.select("body").append("p").text("Minder stellen kiezen voor kinderen")
    .style("font-size", "22px")
    
// idea of margin taken from https://stackoverflow.com/questions/35997408/d3-hide-overflow-of-the-chart-area-when-y-axis-has-a-min-and-max
// Set the dimensions of the canvas / graph
var margin = {top: 30, right: 80, bottom: 120, left: 100},
	w = 700 - margin.left - margin.right,
	h = 370 - margin.top - margin.bottom,
	padding = 2;
	
// create svg element to place our shapes
var svg = d3.select("body") 
    .append("svg")    
        .attr("width", w + margin.left + margin.right)    
        .attr("height", h + margin.top + margin.bottom)
    .append("g")
        .attr("transform", "translate(" + margin.left + ",0)");
            
// scale data
var xScale = d3.scaleBand()
                    .domain(years)
                    .range([0, w]); 
                    
                    
var yScale = d3.scaleLinear()
                    .domain([d3.min(dataset.data, function(d) {
                        return d.zonder }), d3.max(dataset.data, function(d) {
                        return d.zonder })])
                    .range([h, 0])
                    .nice();

// define x-axis
var xAxis = d3.axisBottom()
                .scale(xScale)
                .ticks(8);
                
// define y-axis
var yAxis = d3.axisLeft()
                .scale(yScale)
                .ticks(5);

// add axes
svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(0," + (h - padding) + ")")
    .call(xAxis);

svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(" + padding + ",0)")
    .call(yAxis);
    
// // create rectangles
// svg.selectAll("rect")
//   .data(zonder)
//   .enter()
//   .append("rect")
   
//   // make sure ratio bars/width is optimal
//   .attr("x", function(d, i) {
//     return i * ((w - margin.left) / zonder.length - padding) + margin.left; 
//     })
    
//     // let the bars come from down to up
//   .attr("y", function(d) {
//         return yScale(d);
//   })
   
//   // make sure padding is always in porportion with width length dataset
// //   .attr("width", w / zonder.length - padding)
//     .attr("width", function(d) { 
//         return (w / zonder.length);
//     })
   
//   // height should show the data value
//   .attr("height", function(d) { 
//       return yScale(d);
//   })
   
//   // add color
//   .attr("fill", function(d) {
//       return "rgb(0, 0, " + (d * 5) + ")";
//   })
 
// // create text 
// svg.selectAll("text")
//     .data(zonder)
//     .enter()
//     .append("text")
//     .text(function(d) {
//         return d;
//     })
//     .attr("x", function(d, i) {
//         return i * (w / zonder.length) + (w / zonder.length - padding) /2;
//     })
//     .attr("y", function(d) {
//         return h - d ;
//     })
//     .attr("font-family", "sans-serif")
//     .attr("font-size", "11px")
//     .attr("fill", "white")
//     .attr("text-anchor", "middle");
    
// generate axis
svg.append("g")
    
    // assign "axis" class
    .attr("class", "axis")
    // .attr("transform", "translate(0," + (h - padding) + ")")
    .attr("transform", "translate(0," + (h - padding) + ")")
    .call(xAxis);
        
</script>
</body>
</html>
